2006-10-22  Quentin Mathe <qmathe@club-internet.fr>

	This update enables requesting running applications the possibility to
	log out, if they don't reply, they get killed. Very experimental!
	* Controller.h:
	* Controller.m:
	Deleted.
	* ApplicationManager.h:
	* ApplicationManager.m:
	Added LGPL license notices.
	(-applicationShouldTerminateOnOperation:)
	(-gracefullyTerminateAllApplicationsOnOperation:): 
	Updated to match SCSystem changes. Now retrieve SCSystem instance directly
	by calling -serverInstance instead of -sharedInstance which doesn't work
	locally at this time.
	(-gracefullyTerminateAllApplicationsOnOperation:): Modified to use private
	NSWorkspace method -_connectApplication: instead of WorkspaceCommKit 
	similarly named method.
	* EtoileSystem.h:
	* EtoileSystem.m:
	Added some debugging logs. New 'path' ivar in SCTask. New constant 
	EtoileSystemServerName, was EtoileWorkspaceServerAppName previously in
	Controller.m.
	(-[SCTask dealloc]):
	(-[SCTask path]):
	(-[SCTask name]):
	New methods.
	(-[SCSystem startProcessWithDomain:error:]): Improved to avoid starting 
	several processes per domain.
	(-[SCSystem maskedProcesses]): Renamed -hiddenProcesses method since such
	tasks could be visible to the user (like MenuServer), they should just be
	invisible to ApplicationManager.
	(-[SCSystem gracefullyTerminateAllProcessesOnOperation:): Added early code 
	skeleton.

2006-10-19  Quentin Mathe <qmathe@club-internet.fr>

    Update to provide basic session management. At this time only 'log out' is
    supported in an unclean way (just by telling etoile_system to exit without
    asking running applications to quit), yet the implementation for such
    features is already here. This commit also introduces far more evolved 
    process handling, system related tasks can now be controlled at run time 
    with a config plist file.
    * Controller.h:
    * Controller.m:
    * ApplicationManager.h:
    * ApplicationManager.m:
    * EtoileWorkspaceServerInfo.plist:
    * NSArrayAdditions.h:
    * NSArrayAdditions.m:
    * NSDictionaryAdditions.h:
    * NSDictionaryAdditions.m:
    * NSSetAdditions.h:
    * NSSetAdditions.m:
    Added code written by Saso Kiselkov modified to fit into System.
    * WorkspaceCommKit:
    Added a private framework to allow communication between MenuServer and 
    System. Should be replaced/merged into CoreObject once available. This 
    small framework was written by Saso Kiselkov too.
    * main.m: Modified to use the default run loop rather than a new one.
    * GNUmakefile: Updated to take care of WorkspaceCommKit as a subproject and
    to link gnustep-gui as a temporary solution (giving access to NSWorkspace
    and applications related stuff).
    * EtoileSystem.h:
    * EtoileSystem.m:
    Massive update including new ivars and a bunch of new methods taken from
    Saso code.
    (SetNonNullError()): New helper function to report error.
    (-[SCTask  isHidden]):
    (-[SCTask isStopped]):
    New methods with related ivars.
    (+[SCTask taskWithLaunchPath:onDemand:withUserName:): Updated to init new 
    ivars.
    (-[SCTask terminate]): Overriden NSTask method to set 'stopped' ivar value
    properly on termination request.
    (+setUpServerInstance:): Modified to set the connection delegate.
    (-initWithArguments:): Modified to call 
    -findConfigFileAndStartUpdateMonitoring and 
    -synchronizeProcessesWithConfigFile. Removed gdomap from launched processes
    since it needs to be run as root and this isn't true for etoile_system at
    this time.
    (-startProcessWithDomain:)
    (-restartProcessWithDomain:)
    (-stopProcessWithDomain:)
    (-suspendProcessWithDomain:):
    Modified the methods to take an error paramater in the form of an extra
    'error: (NSError **)error' part at the end of the signature.
    (-startProcessWithDomain:): Don't start a process already running and 
    add notifications observing to have feedback when the process will die.
    (-loadConfigList): Updated to call -checkConfigFileUpdate.
    (-hiddenProcess)
    (-gracefullyTerminateAllProcessesOnOperation:)
    (-logOutAndPowerOff:):
    (-startProcessWithUserFeedbackForDomain:)
    (-findConfigFileAndStartUpdateMonitoring)
    (-checkConfigFileUpdate)
    (-synchronizeProcessesWithConfigFile)
    (-processTerminated:):
    New methods.
    
2006-08-06  Quentin Mathe <qmathe@club-internet.fr>

    * etoile.desktop: Added xsessions file following Freedesktop 'Desktop Entry' 
    spec and to be used with GDM, KDM etc. Trying Etoile should be enjoyable 
    now :-)

2006-08-06  Quentin Mathe <qmathe@club-internet.fr>

    * EtoileSystem.h: Documented Task/Process Info Dictionary Schema (used for 
    config files stored in plist form). Removed superfluous SCEtoileSystem
    protocol.
    (-loadConfigList):
    (-saveConfigList):
    (+serverInstance):
    (+setUpServerInstance:):
    Declared new methods.
    * EtoileSystem.m: Documented Main System Process List. Morphed NSTask
    category in a new SCTask class and replaced dot separator in domains by the 
    usual slash.
    (+[SCTask taskWithLaunchPath:]): Updated.
    (+[SCTask taskWithLaunchPath:onDemand:withUserName]):
    (-[SCTask launchForDomain:]): Replaced dot separator in domains by the 
    usual slash.
    (-[SCTask launchOnDemand]):
    (+[SCSystem initialize]):
    (+[SCSystem serverInstance]):
    (+[SCSystem setUpServerInstance:]):
    New methods.
    (+[SCSystem sharedInstance]): Fixed to return a singleton (or precisely a
    proxy for the singleton located on the server side), was wrongly returning
    a simple instance.
    (-[SCSystem init]): Updated to use SCTask now and replaced dot separator in
    domains by the usual slash.
    (-[SCSystem run]): Modified to launch only tasks not used on demand.
    (-[SCSystem startProcessWithDomain:]): Removed a bunch of error logging 
    code that isn't useful. Replaced 'NSTask' references by 'SCTask'.
    (-[SCSystem restartProcessWithDomain:): Introduced a new boolean 'stopped'
    to make the code more readable.
    (-[SCSystem registerProcessForDomain:): 
    (-[SCSystem unregisterProcessForDomain:
    Removed SCEtoileSytem protocol.
    * main.m: Modified to properly set up a server instance for SCSystem and 
    a run loop that avoids the daemon exits immediately.
    * GNUmakefile: Minor update to disable direct install in /usr/local/bin, we
    rather let the setup script (to be committed in trunk/Etoile) creating a 
    link in /usr/local/bin or elsewhere.

2006-03-05  Quentin Mathe <qmathe@club-internet.fr>

    * ChangeLog:
    * COPYING:
    * EtoileSystem.h:
    * EtoileSystem.m:
    * main.m:
    * GNUmakefile:
    Initial import of EtoileSystem tool which owns any running Etoile system.